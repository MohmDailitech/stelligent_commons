{
   "AWSTemplateFormatVersion":"2010-09-09",
   "Description":"Dromedary CodePipeline Custom Action Provisioning",
   "Parameters":{
      "MyInputArtifacts":{
         "Type":"String",
         "Default":"DromedarySource"
      },
      "MaximumCountForOutputArtifactDetails":{
         "Type":"String",
         "Default":"5"
      },
      "Version":{
         "Type":"String",
         "Default":"1"
      }
   },
   "Resources":{
      "TestAppViaLambdaCustomActionType":{
         "Type":"AWS::CodePipeline::CustomActionType",
         "Properties":{
            "Category":"Build",
            "Provider":"TestApp-Via-Lambda",
            "Version":{
               "Ref":"Version"
            },
            "ConfigurationProperties":[
               {
                  "Description":"The name of the build project must be provided when this action is added to the pipeline.",
                  "Key":"true",
                  "Name":"MyProjectName",
                  "Queryable":"false",
                  "Required":"true",
                  "Secret":"false",
                  "Type":"String"
               }
            ],
            "InputArtifactDetails":{
               "MaximumCount":"5",
               "MinimumCount":"1"
            },
            "OutputArtifactDetails":{
               "MaximumCount":"5",
               "MinimumCount":"0"
            }
         }
      },
      "OpsWorksViaLambdaCustomActionType":{
         "Type":"AWS::CodePipeline::CustomActionType",
         "Properties":{
            "Category":"Deploy",
            "Provider":"OpsWorks-Via-Lambda",
            "Version":{
               "Ref":"Version"
            },
            "ConfigurationProperties":[
               {
                  "Name":"Deploy-Bucket",
                  "Required":true,
                  "Key":false,
                  "Secret":false
               },
               {
                  "Name":"OpsWorks-Stack-ID",
                  "Required":true,
                  "Key":false,
                  "Secret":false
               },
               {
                  "Name":"OpsWorks-App-ID",
                  "Required":true,
                  "Key":true,
                  "Secret":false
               }
            ],
            "InputArtifactDetails":{
               "MinimumCount":1,
               "MaximumCount":1
            },
            "OutputArtifactDetails":{
               "MinimumCount":0,
               "MaximumCount":0
            }
         }
      }
   },
   "Outputs":{
      "StackName":{
         "Value":{
            "Ref":"AWS::StackName"
         }
      },
      "TestAppViaLambdaCustomActionType":{
         "Description":"CodePipeline Build Custom action name",
         "Value":{
            "Ref":"TestAppViaLambdaCustomActionType"
         }
      }
   }
}